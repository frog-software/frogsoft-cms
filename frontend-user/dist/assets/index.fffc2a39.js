var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i;import{a as s,r as o,c as n,b as l,w as c,o as d,d as u,e as m,t as p,h as g,f as _,m as h,g as f,p as b,i as y,u as w,U as L,j as v,k,l as E,n as D,A,q as P}from"./vendor.678eb57e.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var j="/assets/logo.820464a5.png";const O={name:"ArticleList",props:{listData:Array,pageSize:Number},data:()=>({listSource:null,listDataLock:null,loading:!1,currentPage:1}),computed:{pagination(){return{onChange:e=>{this.currentPage=e,this.getCurrentPageData(e)},pageSize:this.pageSize,total:this.listDataLock?this.listDataLock.length:0,current:this.currentPage}}},watch:{listData(){this.listDataLock=Object.assign([],this.listData),this.currentPage=1},listDataLock(){this.listDataLock&&0!==this.listDataLock.length&&this.getCurrentPageData(1)}},created(){this.listDataLock=Object.assign([],this.listData)},methods:{getCurrentPageData(e){this.loading=!0,s.put("/articles",{articles:this.listData.slice((e-1)*this.pageSize,e*this.pageSize)}).then((e=>{this.listSource=e.data.articles})).finally((()=>{this.loading=!1}))}}},S=["src"];O.render=function(e,t,a,i,r,s){const g=o("router-link"),_=o("a-list-item-meta"),h=o("a-list-item"),f=o("a-list");return d(),n("div",null,[l(f,{"data-source":r.listSource||[],pagination:s.pagination,loading:{spinning:r.loading,delay:500},"item-layout":"vertical"},{renderItem:c((({item:e})=>[l(h,null,{extra:c((()=>[u("img",{src:e.article.cover,alt:"文章封面",width:"300"},null,8,S)])),default:c((()=>[l(_,{description:e.article.description},{title:c((()=>[u("h2",null,[l(g,{to:{name:"ArticleDetails",params:{id:e.article.id.toString()}}},{default:c((()=>[m(p(e.article.title),1)])),_:2},1032,["to"])])])),_:2},1032,["description"])])),_:2},1024)])),_:1},8,["data-source","pagination","loading"])])},g.locale("zh-cn");const V={id:0,username:"username",nickname:"nickname",email:"pxm@edialect.top",avatar:"https://cdn.icon-icons.com/icons2/1378/PNG/512/avatardefault_92824.png",is_admin:!1},T=_({state:{tab:[],drawerVisibility:!1,drawerLoading:!1,user:Object.create(V),publish_articles:[],like_articles:[],music:6,replyTo:0,commentsLoading:!1,comments:[{id:1234,user:{id:0,nickname:"nickname",avatar:"http://dummyimage.com/100x100"},content:"content",time:"2000-01-01 00:00:00",parent:123}]},getters:{loginStatus:e=>e.user.id>0,tab:e=>e.tab,drawerVisibility:e=>e.drawerVisibility,drawerLoading:e=>e.drawerLoading,user:e=>e.user,publish_articles:e=>e.publish_articles,like_articles:e=>e.like_articles,music:e=>e.music,replyTo:e=>e.replyTo,comments:e=>e.comments,commentsLoading:e=>e.commentsLoading},mutations:{tab(e,t){["Home","Articles","Tools"].indexOf(t[0])>=0?e.tab=Object.assign([],t):e.tab=[]},drawerVisibility(e,t){e.drawerVisibility=t,!0===t&&this.commit("userUpdate")},userLogin(e,t){e.user.id.toString()!==t&&(e.user.id=Number(t),localStorage.setItem("id",t),this.commit("userUpdate"))},userLogout(e){localStorage.removeItem("id"),localStorage.removeItem("token"),e.user=Object.create(V),e.publish_articles=[],e.like_articles=[],e.drawerVisibility=!1},userUpdate(e){e.drawerLoading=!0,s.get(`/users/${e.user.id}`).then((t=>{e.user=t.data.user,e.publish_articles=t.data.publish_articles,e.like_articles=t.data.like_articles,e.drawerLoading=!1}))},changeMusic(e,t){e.music=t},changeReplyTo(e,t){e.replyTo=t},updateComments:(e,t)=>(e.commentsLoading=!0,s.get(`/articles/${t}/comments`).then((t=>{e.comments=t.data.comments,e.comments.forEach((e=>{e.time=g(e.time).fromNow()}))})).finally((()=>{e.commentsLoading=!1})))},actions:{},modules:{}}),I={name:"UserPage",components:{ArticleList:O},computed:((e,s)=>{for(var o in s||(s={}))a.call(s,o)&&r(e,o,s[o]);if(t)for(var o of t(s))i.call(s,o)&&r(e,o,s[o]);return e})({},h({user:"user",publish_articles:"publish_articles",like_articles:"like_articles",drawerLoading:"drawerLoading"}))},R=m(" 用户信息 "),z=m(" 修改 "),C=m(" 进入创作中心 "),U=m(" 登出 ");I.render=function(e,t,a,i,r,s){const n=o("router-link"),u=o("a-button"),g=o("a-descriptions-item"),_=o("a-descriptions"),h=o("ArticleList"),b=o("a-tab-pane"),y=o("a-tabs"),w=o("a-spin");return d(),f(w,{spinning:e.drawerLoading},{default:c((()=>[l(_,{layout:"vertical"},{title:c((()=>[l(n,{to:{name:"UserDetails",params:{id:e.user.id.toString()}}},{default:c((()=>[R])),_:1},8,["to"]),l(u,{style:{float:"right"},type:"dashed"},{default:c((()=>[l(n,{to:{name:"UserSettings"}},{default:c((()=>[z])),_:1})])),_:1})])),default:c((()=>[l(g,{label:"用户名"},{default:c((()=>[m(p(e.user.username),1)])),_:1}),l(g,{label:"邮箱"},{default:c((()=>[m(p(e.user.email),1)])),_:1}),l(g,{label:"上次登陆时间"},{default:c((()=>[m(p(e.user.login_time),1)])),_:1})])),_:1}),l(y,null,{tabBarExtraContent:c((()=>[l(n,{to:{name:"ArticleCreate"}},{default:c((()=>[C])),_:1})])),default:c((()=>[l(b,{key:"1",tab:"我创作的文章"},{default:c((()=>[l(h,{"list-data":e.publish_articles,"page-size":3},null,8,["list-data"])])),_:1}),l(b,{key:"2",tab:"收藏列表"},{default:c((()=>[l(h,{"list-data":e.like_articles,"page-size":3},null,8,["list-data"])])),_:1})])),_:1}),l(u,{danger:"",type:"primary",onClick:t[0]||(t[0]=t=>{e.store.commit("userLogout"),e.$router.go(0)})},{default:c((()=>[U])),_:1})])),_:1},8,["spinning"])};b("data-v-552d5894");const x={key:0},N=m(" 登录 "),F=u("div",null,"请登录您的账户",-1),H={key:1,class:"user"},$=["src"];y();const q={name:"HeaderUser",computed:{hasLogin:()=>T.getters.loginStatus,username:()=>T.getters.user.username,avatar:()=>T.getters.user.avatar,drawerVisibility:{get:()=>T.getters.drawerVisibility,set(e){T.commit("drawerVisibility",e)}}}},K=Object.assign(q,{setup:function(e){return(e,t)=>{const a=o("router-link"),i=o("a-button"),r=o("a-popover"),s=o("a-space"),m=o("a-avatar"),g=o("a-drawer");return e.hasLogin?(d(),n("div",H,[l(r,{placement:"bottom",trigger:"hover"},{content:c((()=>[u("p",null,"你好，亲爱的"+p(e.username)+"！",1)])),default:c((()=>[l(m,{src:e.avatar,onClick:t[0]||(t[0]=e=>w(T).commit("drawerVisibility",!0))},null,8,["src"])])),_:1}),l(g,{visible:e.drawerVisibility,"z-index":1500,placement:"right",style:{"text-align":"center"},width:"700",onClose:t[1]||(t[1]=e=>w(T).commit("drawerVisibility",!1))},{title:c((()=>[u("img",{src:e.avatar,alt:"个人中心",width:"40"},null,8,$)])),default:c((()=>[l(I)])),_:1},8,["visible"])])):(d(),n("div",x,[l(s,{align:"baseline",direction:"horizontal",size:"middle"},{default:c((()=>[l(i,{class:"link",size:"small",type:"link"},{default:c((()=>[l(a,{to:"/login"},{default:c((()=>[N])),_:1})])),_:1}),l(r,{placement:"bottom",trigger:"hover"},{content:c((()=>[F])),default:c((()=>[l(w(L))])),_:1})])),_:1})]))}}});K.__scopeId="data-v-552d5894";const W={class:"header"},M=u("img",{alt:"E方言图标",src:"/assets/logo.820464a5.png",width:"120"},null,-1),G=m(" 主页 "),B=m(" 文章 "),Y=m(" 工具 ");const J={name:"Header",data:()=>({searchContent:""}),computed:{tab:{get:()=>T.getters.tab,set(e){T.commit("tab",e)}}}},Q=Object.assign(J,{setup:function(e){return(e,t)=>{const a=o("router-link"),i=o("a-col"),r=o("a-menu-item"),s=o("a-menu"),u=o("a-input-search"),m=o("a-row");return d(),n("div",W,[l(m,{align:"middle",justify:"space-around",type:"flex"},{default:c((()=>[l(i,{span:3},{default:c((()=>[l(a,{to:"/Home"},{default:c((()=>[M])),_:1})])),_:1}),l(i,{span:9},{default:c((()=>[l(s,{selectedKeys:e.tab,"onUpdate:selectedKeys":t[0]||(t[0]=e=>v(tab)?tab.value=e:null),mode:"horizontal"},{default:c((()=>[l(r,{key:"Home"},{default:c((()=>[l(a,{to:{name:"Home"}},{default:c((()=>[G])),_:1})])),_:1}),l(r,{key:"Articles"},{default:c((()=>[l(a,{to:{name:"Articles"}},{default:c((()=>[B])),_:1})])),_:1}),l(r,{key:"Tools"},{default:c((()=>[l(a,{to:{name:"Tools"}},{default:c((()=>[Y])),_:1})])),_:1})])),_:1},8,["selectedKeys"])])),_:1}),l(i,{span:6},{default:c((()=>[l(u,{value:e.searchContent,"onUpdate:value":t[1]||(t[1]=e=>v(searchContent)?searchContent.value=e:null),placeholder:"开始搜索",onSearch:t[2]||(t[2]=t=>e.$router.push({name:"Search",query:{key:e.searchContent}}))},null,8,["value"])])),_:1}),l(i,{span:2},{default:c((()=>[l(K)])),_:1})])),_:1})])}}});const X={name:"Footer"};b("data-v-85b06916");const Z={class:"footer"},ee=u("img",{alt:"E方言",src:"/assets/logo2.2d3c5f51.png",width:"240"},null,-1),te=u("h4",{style:{color:"white"}},[m(" 相关网站： "),u("a",{href:"https://www.ydict.net/",style:{color:"white"}},"榕典"),m("  | "),u("a",{href:"https://www.moedict.tw/",style:{color:"white"}},"萌典"),m(" | "),u("a",{href:"https://fangyan.xunfei.cn/#/",style:{color:"white"}},"讯飞方言保护计划"),m(" | "),u("a",{href:"https://zhongguoyuyan.cn/",style:{color:"white"}},"中国语言保护工程采录展示平台")],-1),ae={style:{color:"white"}},ie=m(" 关于我们： "),re=m(" 团队介绍 "),se=m(" | "),oe=u("a",{href:"",style:{color:"white"}},"Github",-1);y(),X.render=function(e,t,a,i,r,s){const m=o("a-col"),g=o("router-link"),_=o("a-row");return d(),n("div",Z,[l(_,{align:"middle",justify:"space-around",type:"flex"},{default:c((()=>[l(m,{span:"3"},{default:c((()=>[ee])),_:1}),l(m,{span:"12"},{default:c((()=>[te,u("h4",ae,[ie,l(g,{style:{color:"white"},to:"/about"},{default:c((()=>[re])),_:1}),se,oe]),u("h4",null,"Copyrights © "+p((new Date).getFullYear())+" Easy Dialect. All Rights Reserved.",1)])),_:1})])),_:1})])},X.__scopeId="data-v-85b06916";const ne={class:"body"};const le={beforeCreate(){document.addEventListener("DOMContentLoaded",(()=>{const e=document.documentElement.clientWidth;document.body.style.zoom=`${Number(e/12).toString()}%`}))},created(){window.localStorage.getItem("id")&&T.commit("userLogin",window.localStorage.getItem("id"))},mounted(){window.addEventListener("resize",this.onResize)},beforeUnmount(){window.removeEventListener("resize",this.onResize)},methods:{onResize(){setTimeout((()=>{const e=document.documentElement.clientWidth;document.body.style.zoom=`${Number(e/12).toString()}%`}))}}},ce=Object.assign(le,{setup:function(e){return(e,t)=>{const a=o("a-layout-header"),i=o("router-view"),r=o("a-layout-content"),s=o("a-layout-footer"),m=o("a-layout");return d(),n("div",null,[l(m,{style:{width:"1200px"}},{default:c((()=>[l(a,{style:{background:"white"}},{default:c((()=>[l(Q)])),_:1}),l(r,null,{default:c((()=>[u("div",ne,[l(i)])])),_:1}),l(s,{style:{background:"rgb(46, 46, 46)"}},{default:c((()=>[l(X)])),_:1})])),_:1})])}}});const de={},ue=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in de)return;de[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t?new Promise(((e,t)=>{i.addEventListener("load",e),i.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},me=[{path:"/",redirect:"/Home"},{path:"/Home",name:"Home",component:()=>ue((()=>import("./Home.6c9814d4.js")),["assets/Home.6c9814d4.js","assets/Home.89c279e5.css","assets/vendor.678eb57e.js"])},{path:"/About",name:"About",component:()=>ue((()=>import("./About.24f94d92.js")),["assets/About.24f94d92.js","assets/vendor.678eb57e.js"])},{path:"/search",name:"Search",props:e=>({keyWords:e.query.key}),component:()=>ue((()=>import("./SearchResult.6cd3fe35.js")),["assets/SearchResult.6cd3fe35.js","assets/vendor.678eb57e.js"])},{path:"/login",name:"Login",component:()=>ue((()=>import("./Login.7492dd84.js")),["assets/Login.7492dd84.js","assets/Login.b6b6e2c2.css","assets/vendor.678eb57e.js"])},{path:"/register",name:"Register",component:()=>ue((()=>import("./Register.1898b203.js")),["assets/Register.1898b203.js","assets/Register.1a5202f2.css","assets/vendor.678eb57e.js"])},{path:"/forget",name:"Forget",component:()=>ue((()=>import("./Forget.f80aca41.js")),["assets/Forget.f80aca41.js","assets/Forget.d9c6fefc.css","assets/vendor.678eb57e.js"])},{path:"/articles",name:"Articles",component:()=>ue((()=>import("./Articles.a02b5e50.js")),["assets/Articles.a02b5e50.js","assets/Articles.eb62c992.css","assets/vendor.678eb57e.js"])},{path:"/articles/create",name:"ArticleCreate",props:!0,component:()=>ue((()=>import("./ArticleEdit.3b19685f.js")),["assets/ArticleEdit.3b19685f.js","assets/ArticleEdit.44b8198f.css","assets/vendor.678eb57e.js","assets/style.9d8eb5aa.js","assets/style.8fd0b4da.css"])},{path:"/articles/:id",name:"ArticleDetails",props:!0,component:()=>ue((()=>import("./ArticleDetails.40dcf174.js")),["assets/ArticleDetails.40dcf174.js","assets/style.9d8eb5aa.js","assets/style.8fd0b4da.css","assets/vendor.678eb57e.js"])},{path:"/articles/edit/:id",name:"ArticleEdit",props:!0,component:()=>ue((()=>import("./ArticleEdit.3b19685f.js")),["assets/ArticleEdit.3b19685f.js","assets/ArticleEdit.44b8198f.css","assets/vendor.678eb57e.js","assets/style.9d8eb5aa.js","assets/style.8fd0b4da.css"])},{path:"/users/:id",name:"UserDetails",props:!0,component:()=>ue((()=>import("./UserDetails.8fb73a2f.js")),["assets/UserDetails.8fb73a2f.js","assets/vendor.678eb57e.js"])},{path:"/settings",name:"UserSettings",component:()=>ue((()=>import("./UserSettings.22ab1ac8.js")),["assets/UserSettings.22ab1ac8.js","assets/UserSettings.7d177eff.css","assets/vendor.678eb57e.js"])},{path:"/tools",name:"Tools",component:()=>ue((()=>import("./Tools.57337be8.js")),["assets/Tools.57337be8.js","assets/vendor.678eb57e.js"])},{path:"/NotFound",name:"NotFound",component:()=>ue((()=>import("./NotFound.95d43097.js")),["assets/NotFound.95d43097.js","assets/vendor.678eb57e.js"])},{path:"/Forbidden",name:"Forbidden",component:()=>ue((()=>import("./Forbidden.888226b4.js")),["assets/Forbidden.888226b4.js","assets/vendor.678eb57e.js"])}],pe=k({history:E(),routes:me});pe.beforeEach(((e,t,a)=>{T.commit("tab",[e.name]),T.commit("drawerVisibility",!1),a()}));const ge=D(ce);ge.use(T),ge.use(pe),ge.use(A),ge.config.productionTip=!1,ge.config.globalProperties.$store=T,s.defaults.baseURL="https://api.pxm.edialect.top/",ge.config.globalProperties.Axios=s,s.interceptors.request.use((function(e){return e.headers.token=localStorage.getItem("token")||"",e}),(function(e){return P.error(e.toString()),Promise.reject(e)})),s.interceptors.response.use((function(e){return e}),(function(e){switch(e.response.status){case 401:P.error("权限错误！你无权进行该操作！");break;default:P.error(e.toString()),console.log(e.response)}return Promise.reject(e)})),ge.mount("#app");export{j as _,O as a,T as s};
